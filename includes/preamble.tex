\ProvidesFile{preamble.tex}[2013/09/06 v1.0 -- Syllabus preamble]

% basic typography
\usepackage{fontspec}
\setmainfont[Ligatures=TeX]{Meta Serif Pro}
\setsansfont[Ligatures=TeX]{Meta Pro}
\newfontfamily\Heb{Meta Hebrew}
\setmonofont[Scale=MatchLowercase]{Menlo}
\usepackage{sectsty}
\allsectionsfont{\sffamily}
\frenchspacing
\setlength{\emergencystretch}{3em} % prevent overfull lines

% custom font size and leading
\renewcommand\tiny{\fontsize{6}{9}\selectfont}
\renewcommand\scriptsize{\fontsize{7}{10}\selectfont}
\renewcommand\footnotesize{\fontsize{8}{11}\selectfont}
\renewcommand\small{\fontsize{8.5}{11.5}\selectfont}
\renewcommand\normalsize{\fontsize{9}{12}\selectfont}% base size
\renewcommand\large{\fontsize{11}{14}\selectfont}
\renewcommand\Large{\fontsize{13}{16}\selectfont}
\renewcommand\LARGE{\fontsize{16}{19}\selectfont}% "course syllabus \\ semester" benefits from more lead
\renewcommand\huge{\fontsize{19}{21}\selectfont}
\renewcommand\Huge{\fontsize{24}{26}\selectfont}

% layout packages: page, logo, tables
\usepackage[scale={0.6,0.8},
            xetex]{geometry}
\usepackage{graphicx}
\usepackage{array}     % allow insertions of column styling with >{}
\usepackage{booktabs}  % elegant horizontal rules in tables
\usepackage{marginfix} % protect positioning of margin table in policy/grades

% custom macros for a session count in the schedule of readings
\newcounter{session}
\newcounter{columns}
\newcounter{courseunit}
\newcommand\setcolumncount[2][0]{ % optionally set count to other than 0,
  \setcounter{session}{#1}        % e.g. to -1, or to a standing count
  \setcounter{columns}{#2}}
\newcommand\sessioncount{\stepcounter{session}\arabic{session}}
\newcommand\sessionskip[1]{\multicolumn{1}{@{}r@{ }}{#1}}
\newcommand\unit[1]{\multicolumn{\thecolumns}{c}{%
  \scshape\stepcounter{courseunit}\roman{courseunit}. \MakeLowercase{#1}}}
\newcommand\noclass[1]{\multicolumn{1}{@{}l}{\itshape No Class: #1}}

% color to match Tyndale's branding
\usepackage[usenames]{xcolor}
% predefined: black, white, red, green, blue, cyan, magenta, yellow
\definecolor{TyndaleURLs}{HTML}{0062A0} % links on tyndale.ca
\definecolor{TyndaleBlue}{cmyk}{1,1,0,.32}
\definecolor{TyndaleGold}{cmyk}{0,.27,1,0}
\definecolor{TyndaleRed}{cmyk}{0,1,.99,.04}
\definecolor{TyndaleBlack}{cmyk}{0,0,0,1}
\definecolor{TyndaleGreen}{cmyk}{.45,0,1,.24}
\definecolor{TyndaleOrange}{cmyk}{0,.79,1,0}
\definecolor{TyndaleAqua}{cmyk}{.47,0,.24,0}
\definecolor{TyndaleYellow}{cmyk}{.03,.03,.35,0}

% metadata (assumes a host of definitions are made in the main file)
\usepackage[setpagesize=false,     % leave this to geometry
            hyperfootnotes=false,  % fragile and distracting
            xetex]{hyperref}
\hypersetup{breaklinks=true,       % allow link text to break across lines
            colorlinks=true,       % colorlinks resets pdfborder to 0 0 0
            urlcolor=TyndaleURLs,  % for external links
            linkcolor=TyndaleRed,  % for normal internal links
            citecolor=TyndaleGold, % for bibliographical citations in text
            pdfauthor={\prof},
            pdftitle={\ccode: \ctitle},
            pdfsubject={Tyndale UC, \csemester},
            pdfcreator={github.com/danieldriver/syllabus}}
\urlstyle{same}                    % don't use monospace font for urls

% custom footlines
\usepackage{fancyhdr}
\pagestyle{fancy} % turn it on
\fancyhf{}        % reset everything
\renewcommand{\headrulewidth}{0pt} % remove header line as well
\lfoot{\sffamily\scshape\footnotesize\MakeLowercase{\ctitle, v\cversion}}
\rfoot{\sffamily\scshape\footnotesize\MakeLowercase{\prof\quad\thepage}}

% gratuitous with custom title page, but useful as a fallback
\title{\ccode: \ctitle}
\author{\professor}
\date{\semester}
